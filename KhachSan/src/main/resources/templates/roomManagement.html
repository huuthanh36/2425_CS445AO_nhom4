<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Quản lý Phòng</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- DataTables CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <!-- DataTables JS -->
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
  <!-- Bootstrap JS (Optional) -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

  <script>
    $(document).ready(function() {
      $('#roomTable').DataTable({
        "pagingType": "full_numbers",
        "lengthChange": false,
        "searching": true,
        "ordering": true,
        "info": true,
        "autoWidth": false,
        "pageLength": 5
      });
    });
  </script>

</head>
<body>

<div class="container">
  <h1 class="mt-5">Quản lý Phòng</h1>
  <form th:action="@{/rooms/deleteCheckBox}" method="post">
    <table th:if="${roomList != null}" class="display" style="margin-top:auto;" id="roomTable">
      <thead>
      <tr>
        <th>STT</th>
        <th>Tên Phòng</th>
        <th>Trạng Thái</th>
        <th>Giá</th>
        <th>Đặt Phòng</th>
        <th>Xóa bằng checkbox</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="room, status: ${roomList}" th:object="${room}">
        <td th:text="${status.index + 1}"></td>
        <td th:text="*{roomName}"></td>
        <td th:text="*{status}"></td>
        <td th:text="*{price}"></td>
        <td th:text="*{bookkings.size()}"></td>
        <td>
          <input type="checkbox" th:name="idChecked" th:value="${room.getRoomId()}"/>
        </td>
      </tr>
      </tbody>
      <tfoot>
      <tr>
        <td colspan="5"></td>
        <td>
          <button type="submit" name='delete' value="delete" class='btn btn-secondary btn-sm' data-toggle="tooltip" data-placement="right" th:attr="data-confirm='Bạn có chắc chắn muốn xóa phòng này?'" onclick="return confirmDelete(this.getAttribute('data-confirm'));">
            Xóa
          </button>
        </td>
      </tr>
      </tfoot>
    </table>
  </form>
</div>

<script>
  function confirmDelete(message) {
    return confirm(message);
  }
</script>

</body>
</html>
